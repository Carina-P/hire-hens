{% extends "base_faq.html" %}
{% load static %}

{% block faq_header%}
Frequently Asked Questions
{% endblock faq_header %}

{% block faq_content %}
{% if request.user.is_superuser %}
<div class="text-center mb-3 mt-3">
    {% include 'includes/black_button_lg.html' with url_to='add_faq' button_text='Add FAQ' %}
</div>
{% endif %}
<div class="container mt-4">
    <div class="row justify-content-center mb-5">
        {% for faq in faqs %}
        <div class="col-11 col-md-8 col-lg-9">
            <button class="accordion m-0"><strong>{{ faq.question }}</strong></button>
            <div class="panel">
                <p class="ps-4">{{ faq.answer }}</p>
            </div>
        </div>
        {% if request.user.is_superuser %}
        <div class="col-8 col-md-3 col-lg-3 col-xl-2 text-center mt-2 mb-4">
            {% include 'includes/black_button.html' with url_to='edit_faq' param=faq.id button_text='Edit' %}
            <button type="submit" class="btn btn-black-red" onclick="openRemoveModalFaq('{{ faq.id }}')">Delete</button>
        </div>
        {% endif %}
        {% endfor %}
    </div>
</div>{% include 'includes/modal_remove_faq.html' %}

{% endblock faq_content %}

{% block postloadjs %}
{{ block.super }}
<script src="{% static 'faq/js/accordion.js' %}"></script>
<script>
    function openRemoveModalFaq(faqId) {
        if (faqId === undefined || faqId === null) {
            console.log(
                "Error in function openRemovefaq, questionId undefined");
            return;
        }

        $('#hidden_faq').html(`<input type="hidden" name="faq_id" value="${faqId}">`)
        $('#modal_remove_faq').modal('show');
    }
</script>
{% endblock %}
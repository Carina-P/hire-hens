{% extends "base_products.html" %}
{% load static %}
{% load cart_tools %}

{% block products_header %}
{% if this_category == 'all' %}
Product Management
{% else %}
{{ this_category }}
{% endif %}
{% endblock products_header %}

{% block products_content %}
{% if this_category == 'all' and request.user.is_superuser %}
<div class="text-center">
    <a class="btn btn-lg btn-black" href="{% url 'add_product' %}">Add product</a>
</div>
{% endif %}

<div class="row p-3">
    {% for product in products %}
    <div class="col-sm-6 col-md-6 col-lg-4 col-xl-3">
        {% include 'includes/card.html' %}
    </div>
    {% if forloop.counter|divisibleby:1 %}
    <div class="col-12 d-sm-none mb-2">
        <hr>
    </div>
    {% endif %}
    {% if forloop.counter|divisibleby:2 %}
    <div class="col-12 d-none d-sm-block d-md-block d-lg-none mb-2">
        <hr>
    </div>
    {% endif %}
    {% if forloop.counter|divisibleby:3 %}
    <div class="col-12 d-none d-lg-block d-xl-none mb-2">
        <hr>
    </div>
    {% endif %}
    {% if forloop.counter|divisibleby:4 %}
    <div class="col-12 d-none d-xl-block mb-2">
        <hr>
    </div>
    {% endif %}
    {% endfor %}
</div>
<div class="container mb-5">
    <div class="text-center">
        <a class="btn btn-lg btn-black" href="{% url 'cart' %}">Go to Cart</a>
        {% if rent and this_category == "Equipment"%}
        <a class="btn btn-lg btn-black" href="{% url 'get_products_by_category' 'Consumables' 'buy' %}">Go to Buy
            Consumables</a>
        {% endif %}
    </div>
</div>
{% endblock products_content %}